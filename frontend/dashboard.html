<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinity AI RPG - Dashboard</title>
    <link rel="stylesheet" href="style.css?v=validation-debug">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Background Animation (Global) -->
    <div class="stars-wrapper">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>

    <!-- Campaign Dashboard -->
    <div id="campaign-dashboard" class="dashboard-container">
        <div class="dashboard-content">
            <h1 class="dashboard-title">Infinity AI RPG</h1>
            <button id="dashboard-new-campaign" class="btn-big">‚ú® Nova Campanha</button>
            <button id="dashboard-continue-campaign" class="btn-subtitle">Continuar Campanha</button>
        </div>
    </div>

    <!-- App Sidebar (Used for Campaign List) -->
    <aside id="app-sidebar" class="sidebar hidden">
        <div class="sidebar-header">
            <h2>üìú Campanhas</h2>
            <button id="close-sidebar" class="icon-btn">√ó</button>
        </div>
        <div class="sidebar-content">
            <button id="new-campaign-btn" class="btn-primary full-width">+ Nova Campanha</button>
            <div id="campaign-list" class="campaign-list">
                <!-- Campaigns will be loaded here -->
            </div>
        </div>
        <div class="sidebar-footer">
            <div class="user-info-mini">
                <span id="sidebar-username">Usu√°rio</span>
            </div>
            <button id="logout-btn" class="btn-cancel" style="margin-top: 10px; width: 100%;">Sair</button>
        </div>
    </aside>

    <!-- Creation Modal -->
    <div id="modal-overlay" class="modal-overlay hidden"></div>
    <div id="creation-modal" class="modal hidden" style="max-width: 800px; width: 95%;">
        <div class="modal-header">
            <h2>‚ú® Criar Personagem</h2>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body" style="padding: 0;">
            <!-- Tabs -->
            <div class="creation-tabs"
                style="display: flex; border-bottom: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2);">
                <button class="tab-btn active" data-tab="tab-basic"
                    style="flex: 1; padding: 15px; border: none; background: transparent; color: white; cursor: pointer; border-bottom: 2px solid var(--primary-color);">1.
                    B√°sico</button>
                <button class="tab-btn" data-tab="tab-story"
                    style="flex: 1; padding: 15px; border: none; background: transparent; color: #aaa; cursor: pointer;">2.
                    Passado / Hist√≥ria do personagem</button>
                <button class="tab-btn" data-tab="tab-attributes"
                    style="flex: 1; padding: 15px; border: none; background: transparent; color: #aaa; cursor: pointer;">3.
                    Atributos</button>
            </div>

            <form id="creation-form" style="padding: 20px;">
                <!-- Step 1: Basic Info -->
                <div id="tab-basic" class="tab-content">
                    <div class="row">
                        <div class="form-group half">
                            <label>Nome do Personagem</label>
                            <input type="text" id="char-name" placeholder="Ex: Gandalf...">
                        </div>
                        <div class="form-group half">
                            <label>Ra√ßa</label>
                            <select id="char-race"
                                style="width: 100%; padding: 10px; border-radius: 8px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Humano">Humano (+1 em tudo)</option>
                                <option value="Elfo">Elfo (+2 Des, +1 Int)</option>
                                <option value="An√£o">An√£o (+2 Con, +1 For)</option>
                                <option value="Orc">Orc (+2 For, +1 Con)</option>
                                <option value="Draconato">Draconato (+2 For, +1 Car)</option>
                                <option value="Halfling">Halfling (+2 Des)</option>
                                <option value="Gnomo">Gnomo (+2 Int)</option>
                                <option value="Tiefling">Tiefling (+2 Car, +1 Int)</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group half">
                            <label>Classe</label>
                            <input type="text" id="char-class" placeholder="Ex: Mago, Guerreiro...">
                        </div>
                        <div class="form-group half">
                            <label>Modo de Jogo</label>
                            <select id="char-mode-select"
                                style="width: 100%; padding: 10px; border-radius: 8px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="narrativo">Narrativo</option>
                                <option value="rolagem de dados">Rolagem de Dados</option>
                                <option value="dnd5e">D&D 5E Rules</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Tema da Campanha</label>
                        <input type="text" id="char-theme" placeholder="Ex: Dark Fantasy, Cyberpunk, Medieval...">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-primary next-tab" data-target="tab-story">Pr√≥ximo</button>
                    </div>
                </div>

                <!-- Step 2: Backstory -->
                <div id="tab-story" class="tab-content hidden">
                    <div class="form-group">
                        <label>Hist√≥ria & Descri√ß√£o</label>
                        <textarea id="char-backstory"
                            placeholder="Descreva a apar√™ncia, personalidade e o passado do seu personagem..."
                            style="width: 100%; height: 200px; padding: 15px; border-radius: 8px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1); resize: vertical;"></textarea>
                    </div>
                    <div class="modal-actions" style="justify-content: space-between;">
                        <button type="button" class="btn-cancel prev-tab" data-target="tab-basic">Voltar</button>
                        <button type="button" class="btn-primary next-tab" data-target="tab-attributes">Pr√≥ximo</button>
                    </div>
                </div>

                <!-- Step 3: Attributes -->
                <div id="tab-attributes" class="tab-content hidden" style="position: relative;">
                    <!-- Overlay for Narrative Mode -->
                    <div id="narrative-overlay" class="hidden"
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); z-index: 10; display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 8px;">
                        <span style="font-size: 3rem; margin-bottom: 10px;">üé≠</span>
                        <h3 style="color: white; text-align: center; max-width: 80%;">Atributos desnecess√°rios para o
                            modo de jogo Narrativo</h3>
                        <p style="color: #aaa; margin-top: 10px;">O sistema cuidar√° da hist√≥ria para voc√™.</p>
                        <button type="button" class="btn-primary" style="margin-top: 20px;"
                            onclick="document.querySelector('#creation-form button[type=submit]').click()">Iniciar
                            Aventura Agora</button>
                    </div>

                    <div class="attr-method-selector" style="margin-bottom: 20px; text-align: center;">
                        <label style="margin-right: 15px;">M√©todo de Distribui√ß√£o:</label>
                        <select id="attr-method"
                            style="padding: 5px 10px; border-radius: 5px; background: #333; color: white; border: 1px solid #555;">
                            <option value="pointBuy">Compra de Pontos (Point Buy)</option>
                            <option value="standardArray">Array Padr√£o (Standard Array)</option>
                        </select>
                    </div>

                    <div id="point-buy-container">
                        <div
                            style="text-align: center; margin-bottom: 15px; font-size: 1.1rem; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px;">
                            Pontos Restantes: <span id="points-remaining"
                                style="color: var(--premium-gold); font-weight: bold;">27</span> / 27
                        </div>
                        <div class="attributes-grid" id="pb-grid"
                            style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <!-- Generated via JS -->
                        </div>
                    </div>

                    <div id="standard-array-container" class="hidden">
                        <p style="text-align: center; color: #aaa; margin-bottom: 15px;">Distribua os valores: 15, 14,
                            13, 12, 10, 8</p>
                        <div class="attributes-grid" id="sa-grid"
                            style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <!-- Generated via JS -->
                        </div>
                    </div>

                    <div class="modal-actions" style="justify-content: space-between; margin-top: 20px;">
                        <button type="button" class="btn-cancel prev-tab" data-target="tab-story">Voltar</button>
                        <button type="submit" class="btn-primary">Iniciar Aventura</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Validation Toast -->
    <div id="validation-toast" class="validation-toast hidden">
        <div class="toast-content">
            <span class="toast-icon">‚ÑπÔ∏è</span>
            <span class="toast-message">Por favor, preencha a Hist√≥ria do Personagem. Este campo √© obrigat√≥rio!</span>
        </div>
        <div class="toast-progress"></div>
    </div>

    <!-- Delete Campaign Modal -->
    <div id="delete-modal" class="modal hidden">
        <div class="modal-header">
            <h2>‚ö†Ô∏è Excluir Campanha?</h2>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <p>Esta a√ß√£o √© <strong>IRREVERS√çVEL</strong>.</p>
            <div class="modal-actions">
                <button id="cancel-delete" class="btn-cancel">Cancelar</button>
                <button id="confirm-delete" class="btn-danger">Sim, Excluir</button>
            </div>
        </div>
    </div>

    <script src="auth.js?v=final-v3"></script>
    <script src="character_creation.js?v=final-v3"></script>
    <script src="narrative_overlay.js?v=final-v3"></script>
    <script src="validation_fix.js?v=final-v3"></script>
    <script src="dashboard.js?v=final-v3"></script>
</body>

</html>